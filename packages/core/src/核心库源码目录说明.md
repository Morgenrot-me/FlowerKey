# 核心库源码目录说明

## 目录作用

花钥核心逻辑库，包含加密算法、数据层、同步引擎，供所有端（插件、桌面、移动）复用。

## 文件列表

| 文件 | 作用 |
|------|------|
| `index.ts` | 统一导出入口，对外暴露所有公共 API |
| `models.ts` | 数据模型定义（Entry、ChangeLog、MasterData 等接口） |
| `crypto.ts` | 加密模块：PBKDF2 密钥派生、HMAC-SHA256 密码生成、AES-256-GCM 加解密、记忆密码验证 |
| `db.ts` | IndexedDB 数据层（基于 Dexie.js）：Entry CRUD、ChangeLog 自动记录、主密码数据管理 |
| `sync/` | WebDAV 增量同步引擎（见子目录说明） |

## 技术说明

- 加密全部使用 Web Crypto API，零 WASM 依赖，跨平台兼容
- 密钥分离：masterKey / verifyHash / dbKey 使用不同盐前缀派生
- PBKDF2 迭代次数 ≥ 600,000 次（符合 NIST 2023 建议）
- IndexedDB 按 `type`、`folder`、`updatedAt` 建索引

## 注意事项

- 所有加密操作为异步，返回 Promise
- 不直接依赖浏览器扩展 API，可在 Node.js / Tauri 环境复用
